kind: ProjectConfig
apiVersion: bucketctl.spk.no/v1alpha1
metadata:
  name: desired_project_config
spec:
  projectKey: TEST
  public: true
  defaultPermission: PROJECT_WRITE
  permissions:
    - name: PROJECT_ADMIN
      users:
        - pompel
  branchingModel:
    development:
      useDefault: true
    types:
      - name: feature
        prefix: feature/
      - name: hotfix
        prefix: hotfix/
  branchRestrictions:
    - type: BRANCH
      matchers:
        - matching: main
          restrictions:
            - type: fast-forward-only
            - type: no-deletes
            - type: pull-request-only
              exemptUsers:
                - pilt
  webhooks:
    - name: kaptein hook
      events:
        - repo:refs_changed
      configuration:
        createdBy: bucketctl
      url: https://spk.no
      active: true
      scopeType: project
      sslVerificationRequired: true
  repositories:
    - name: midgard
      permissions:
        - name: REPO_READ
          groups:
            - palantir
    - name: narnia
      permissions:
        - name: REPO_ADMIN
          groups:
            - pevensie
      branchingModel:
        development:
          refId: woop
      webhooks:
        - name: garderobeskap
          events:
            - repo:refs_changed
          configuration:
            createdBy: bucketctl
          url: https://example.com
          active: true
          scopeType: repository
          sslVerificationRequired: true